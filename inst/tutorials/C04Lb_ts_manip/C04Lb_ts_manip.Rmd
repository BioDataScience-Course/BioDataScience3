---
title: "Manipulation de séries temporelle"
author: "Guyliann Engels & Philippe Grosjean"
description: "**SDD III : Module 4** Manipulation de séries temporelles"
tutorial:
  id: "C04Lb_ts_manip"
  version: 2.0.0/3
output:
  learnr::tutorial:
    progressive: true
    allow_skip: true
runtime: shiny_prerendered
---

```{r setup, include=FALSE}
BioDataScience3::learnr_setup()
SciViews::R()
library(pastecs)

set.seed(13313)
vec <- sin((1:100) / 6 * pi) + rnorm(100, sd = 5) + 10
serie <- ts(vec, end = c(2020, 10), frequency = 12)
```

```{r, echo=FALSE}
BioDataScience3::learnr_banner()
```

```{r, context="server"}
BioDataScience3::learnr_server(input, output, session)
```

------------------------------------------------------------------------

## Objectifs

-   Manipuler des séries spatio-temporelles dans R à partir d'objets **ts**.

## Manipulation d'un objet ts

Vous avez à disposition une série spatio-temporelle sous forme d'objet **ts** et nommé `serie`. Nous ne vous en dévoilons pas plus !

### Exercice 1

Combien d'observations `serie` cintient-elle par unité de temps ?

```{r manip1, exercise = TRUE, exercise.lines=3}
___(___)
```

```{r manip1-solution}
## Solution ##
frequency(serie)
```

```{r manip1-check}
grade_code("Tout simplement `frenquency()` nous donne cette information.")
```

### Exercice 2

Quand débute `serie`(sachant que son unité de temps ext l'année) ?

```{r manip2, exercise = TRUE, exercise.lines=3}
___(___)
```

```{r manip2-solution}
## Solution ##
start(serie)
```

```{r manip2-check}
grade_code("Aussi simple, `start()` nous l'indique.")
```

### Exercice 3

Voici un graphique qui représente un aspect intéressant de `serie`.

```{r}
boxplot(split(serie, cycle(serie)), col = "cornsilk")
```

Reproduisez-le par vous-même.

```{r manip3, exercise = TRUE, exercise.lines=3}
___(___(___,___(___)), col = "cornsilk")
```

```{r manip3-solution}
## Solution ##
boxplot(split(serie, cycle(serie)), col = "cornsilk")
```

```{r manip3-check}
grade_code("Ici plusieurs traitements sont combinés pour obtenir le résultat. Tout d'abord `cycle()` indique l'ordre des observations selon un cycle d'une unité de temps. Pour l'année ici, les observations de janvier se voient toutes attribuer `1`, celles de février `2`, etc. Ensuite `split()` sépare la série initiale en 12 sous-série, ayant même valeurs pour le cycle. Autrement dit, on sépare les données de chaque mois dans sa série propre. Enfin, `boxplot()` est la fonction qui crée une boite de dispersion parallèle en R de base. On final, on compare la distribution des obervations pour chaque mois au cours des années.")
```

## Conclusion

```{r comm_noscore, echo=FALSE}
question_text(
  "Laissez-nous vos impressions sur cet outil pédagogique",
  answer("", TRUE, message = "Pas de commentaires... C'est bien aussi."),
  incorrect = "Vos commentaires sont enregistrés.",
  placeholder = "Entrez vos commentaires ici...",
  allow_retry = TRUE
)
```
